(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"00cb":function(e,r,t){},"9a53":function(e,r,t){"use strict";var s=t("00cb"),a=t.n(s);a.a},d4ad:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("q-page",{staticClass:"image-background"},[t("div",{staticClass:"fixed-center login-form"},[t("div",{},[t("q-card",{},[t("q-card-section",[t("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(r){var s=r.valid;return[t("q-form",[t("div",{},[t("p",{staticClass:"text-h6 text-center q-pb-sm"},[e._v("\n                  "+e._s(e.$t("login.title"))+"\n                ")])]),t("validation-provider",{ref:"username",attrs:{vid:"username",name:e.$t("login.form.username"),rules:e.form_rules.username},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("div",{},[t("q-input",{attrs:{id:"username",name:"username",type:"text",label:e.$t("login.form.username"),error:e.hasErrors(s),"error-message":s[0]},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1)]}}],null,!0)}),t("validation-provider",{ref:"password",attrs:{vid:"password",name:e.$t("login.form.password"),rules:e.form_rules.password},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("div",{},[t("q-input",{attrs:{id:"password",name:"password",type:"password",label:e.$t("login.form.password"),error:e.hasErrors(s),"error-message":s[0]},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1)]}}],null,!0)}),t("div",{staticClass:"text-center"},[t("q-btn",{staticClass:"q-mt-md",attrs:{type:"submit",loading:e.loader,disable:!s,label:e.$t("login.title"),color:"teal"},on:{click:e.submit},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-spinner")]},proxy:!0}],null,!0)})],1)],1)]}}])})],1)],1)],1)])])},a=[],n=(t("8e6e"),t("8a81"),t("ac6a"),t("cadf"),t("06db"),t("456d"),t("a481"),t("967e")),o=t.n(n),i=(t("96cf"),t("fa84")),u=t.n(i),c=t("c47a"),l=t.n(c),f=t("2f62"),d=t("b012"),p=t("6fea"),m=t("2ef0"),b=t.n(m),v=t("7bb1"),h=t("039f");function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){l()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var $={name:"Login",components:{ValidationObserver:v["a"],ValidationProvider:h["ValidationProvider"]},watch:{"form.username":function(e){this.$refs.observer.$data.isAuth&&(this.$refs.observer.$data.isAuth=!1,this.$refs.password.reset())},"form.password":function(e){this.$refs.observer.$data.isAuth&&(this.$refs.observer.$data.isAuth=!1,this.$refs.username.reset())}},computed:g({},Object(f["c"])("auth",["isAuth"])),methods:g({},Object(f["b"])("auth",["setAuthStatus","setUserData","storeToken"]),{submit:function(){var e=u()(o.a.mark((function e(){var r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.observer.validate();case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return",!1);case 5:this.login();case 6:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}(),hasErrors:function(e){return!b.a.isEmpty(e)},login:function(){var e=this;this.loader=!0,d["a"].login(this.form).then((function(r){e.storeToken(r),e.setAuthStatus(!0),e.setUserData(b.a.get(r,["data","user_data"],{}));var t=b.a.get(e.$route,["query","redirect"]);t?e.$router.replace(t):e.$router.replace({name:"auth.user"})})).catch((function(r){var t=p["a"].hasErrors(r);t&&p["a"].setErrors(e.$refs.observer,t)})).then((function(){e.loader=!1}))}}),data:function(){return{loader:!1,form:{username:null,password:null,grant_type:"password"},form_rules:{username:"required|max:50",password:"required|min:8",grant_type:"required"}}},beforeRouteEnter:function(e,r,t){t((function(e){e.isAuth&&e.$router.replace({name:"public.index"})}))},meta:function(){return{title:this.$t("page_titles.login_title")}}},y=$,O=(t("9a53"),t("2877")),_=Object(O["a"])(y,s,a,!1,null,"170de660",null);r["default"]=_.exports}}]);